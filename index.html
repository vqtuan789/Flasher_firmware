<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>TienHuyIoT ‚Äî ESP32 Web Flasher</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="card">
        <div class="flex-between">
            <div>
                <h1>TienHuyIoT ‚Äî ESP32 Web Flasher</h1>
                <div class="muted">D√πng Chrome/Edge. K·∫øt n·ªëi USB ‚Üí ch·ªçn firmware ‚Üí flash.</div>
            </div>
            <div>
                <button id="connectBtn">üîå K·∫øt n·ªëi</button>
                <button id="disconnectBtn" class="secondary" disabled>‚õî Ng·∫Øt</button>
            </div>
        </div>

        <hr style="margin:12px 0">

        <div class="row">
            <div style="flex:1">
                <label>Firmware t·ª´ danh s√°ch (t·ª± ƒë·ªông t·∫£i)</label>
                <select id="firmwareList">
                    <option value="">-- Ch·ªçn firmware m·∫´u --</option>
                    <option value="sample1">ESP32 Blink LED</option>
                    <option value="sample2">ESP32 WiFi Scanner</option>
                    <option value="sample3">ESP32 Web Server</option>
                </select>
            </div>

            <div style="flex:1">
                <label>Ho·∫∑c upload file .bin (k√©o th·∫£ ƒë∆∞·ª£c)</label>
                <div class="file-drop" id="fileDrop">
                    <input id="fileInput" type="file" accept=".bin" style="display:none">
                    <div>K√©o th·∫£ file .bin v√†o ƒë√¢y ho·∫∑c <a href="#" id="browseBtn">ch·ªçn file</a></div>
                    <div id="fileName" class="muted" style="margin-top:8px"></div>
                </div>
            </div>
        </div>

        <div style="margin-top:10px" class="row">
            <div style="display:flex;align-items:center;gap:8px;">
                <label for="flashAddress" style="margin:0;font-size:13px;color:#6b7280;">ƒê·ªãa ch·ªâ flash:</label>
                <input type="text" id="flashAddress" value="0x10000" placeholder="0x10000" 
                       style="width:80px;padding:4px 8px;border:1px solid #e2e8f0;border-radius:4px;font-family:monospace;font-size:12px;">
            </div>
            <button id="flashBtn" disabled>üöÄ B·∫Øt ƒë·∫ßu n·∫°p</button>
            <button id="eraseBtn" class="secondary" disabled>üóëÔ∏è Xo√° Flash</button>
            <div style="flex:1"></div>
            <div id="chipInfo" class="muted">
                <span class="status-indicator status-disconnected"></span>Ch∆∞a k·∫øt n·ªëi
            </div>
        </div>

        <div id="progress" style="margin-top:12px">
            <i></i>
        </div>
        
        <div class="row" style="margin-top:10px">
            <div style="flex:1">
                <div class="muted">Ti·∫øn tr√¨nh: <span id="percent">0%</span></div>
            </div>
            <div style="width:260px;text-align:right" class="muted" id="speedInfo">T·ªëc ƒë·ªô: --</div>
        </div>

        <h3 style="margin-top:12px;margin-bottom:6px">Log</h3>
        <pre id="log">S·∫µn s√†ng ƒë·ªÉ k·∫øt n·ªëi ESP32...</pre>

        <div style="margin-top:10px">
            <button id="clearLogBtn" class="secondary">üßπ Xo√° Log</button>
            <button id="openOfficialBtn" class="secondary">üåê C√¥ng c·ª• ch√≠nh th·ª©c</button>
        </div>
    </div>

    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.js"></script>
    
    <!-- Main Application Script -->
    <script type="module" src="scripts.js"></script>
</body>
</html>